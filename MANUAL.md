# 彦歯科医院 予約システム 操作マニュアル

## 1. はじめに
本システムは、患者様からのWeb予約受付と、医院側での予約・患者・スタッフ管理を行うためのシステムです。
本マニュアルでは、主に管理者向けの操作方法について解説します。
サブタイトルは必要ないです

---

## 2. 患者用画面（予約受付）
患者様がアクセスする予約画面です。
**スクリーンショット**: `booking_top.png`

1.  **サービスの選択**: 「初診」「再診」などのメニューを選択します。
2.  **医師の選択**: 希望の医師（スタッフ）を選択します（指名なしも可）。
3.  **日時の選択**: カレンダーから空いている日時を選択します。
4.  **情報の入力**: 名前や連絡先を入力して予約を完了します。

---

## 3. 管理画面へのログイン
管理者は専用のログイン画面からシステムにアクセスします。
**URL**: `/manage.html`
**スクリーンショット**: `admin_login.png`

1.  **ユーザー名**: 管理者IDを入力します。
2.  **パスワード**: パスワードを入力します。
3.  **ログイン**: ボタンを押してダッシュボードへ移動します。

---

## 4. 予約管理（ダッシュボード）
ログイン直後に表示される画面です。カレンダー形式で予約状況を確認できます。
**スクリーンショット**: `admin_calendar.png`

*   **カレンダー表示**: 週ごとの予約状況が表示されます。
*   **予約詳細**: 緑色の予約枠をクリックすると、詳細情報の確認やキャンセル操作が行えます。
*   **週移動**: 上部の「<」「>」ボタンで表示する週を切り替えられます。

---

## 5. 患者管理
登録された患者情報の検索・閲覧・編集ができます。
**スクリーンショット**: `admin_patients.png`

1.  **検索**: 検索ボックスに名前を入力してEnterキーを押すと、患者を検索できます。
2.  **詳細表示**: 患者名をクリックすると、連絡先や過去の予約履歴、カルテ用メモが表示されます。
3.  **メモ追加**: 患者ごとに特記事項を記録できます。

---

## 6. 医師（スタッフ）管理
予約を受け付ける医師やスタッフを管理します。
**スクリーンショット**: `admin_doctors.png`

1.  **新規登録**: 名前と役職を入力して「登録」ボタンを押します。
2.  **一覧表示**: 登録済みスタッフが表示されます。
3.  **削除**: 不要になったスタッフを削除できます（過去の予約データには影響しません）。
4.  **並び替え**: スタッフの行をドラッグ&ドロップして表示順を変更できます。

---

## 7. メニュー（診療内容）管理
予約可能な診療メニューを管理します。
**スクリーンショット**: `admin_services.png`

1.  **新規登録**: メニュー名、所要時間（分）、説明を入力して登録します。
2.  **削除**: 「削除」ボタンでメニューを削除できます（予約が入っているメニューは無効化のみ）。
3.  **ドラッグ&ドロップ**: 並び順を変更できます。

---

## 8. 管理者アカウント管理
管理画面にログインできる管理者アカウントを追加・削除します。
**スクリーンショット**: `admin_accounts.png`

1.  **新規登録**: 新しい管理者のID、パスワード、表示名を設定します。
2.  **削除**: 不要な管理者アカウントを削除できます（自分自身は削除できません）。

---

## 9. システム設定
### 9.1 診療時間設定
曜日ごとの診療時間を設定します。
**スクリーンショット**: `admin_settings_upper.png`

*   **時間設定**: 午前・午後の開始・終了時刻を設定します。休憩時間は「午前の終了」〜「午後の開始」の間として自動的に確保されます。
*   **休診設定**: 「休診」にチェックを入れると、その曜日は予約不可になります。
*   **保存**: 変更したら、必ずその行の「保存」ボタンを押してください。

### 9.2 予約締切設定
予約の受付期間を制限します。
**スクリーンショット**: `admin_settings_lower.png`

*   **予約締切**: 「何日前の何時まで」予約を受け付けるかを設定します。
    *   例：「2日前の21:00まで」→ 1月25日の予約は1月23日21:00で締め切り。
*   **最遠予約日**: 今日から何日先まで予約カレンダーを表示するかを設定します。

### 9.3 臨時スケジュール管理（臨時休業・特別営業）
年末年始やお盆休み、学会出席などの臨時の休診日や、営業時間の変更を設定します。
**スクリーンショット**: `schedule_exception_form.png`、`schedule_exception_list.png`

#### 例外タイプについて
本機能では4種類のスケジュール例外を設定できます：

| タイプ | 説明 | 使用例 |
|--------|------|--------|
| **臨時休業（終日）** | 指定した日を終日休診にします | 年末年始、お盆、祝日振替休日 |
| **時間帯休業** | 指定した時間帯のみ予約不可にします | 午後休診、午前休診、学会出席 |
| **営業時間変更** | 通常とは異なる営業時間で予約を受け付けます | 短縮診療日、延長診療日 |
| **特別営業** | 通常は休診日（日曜など）を臨時で営業日にします | 休日診療、振替診療 |

#### 臨時休業の登録方法

1.  **設定タブを開く**: 管理画面上部の「設定」タブをクリックします。
2.  **臨時スケジュール管理セクション**: 画面を下にスクロールして「臨時スケジュール管理」セクションを見つけます。
3.  **例外タイプを選択**: プルダウンから設定したい種類を選びます。
    *   終日休診の場合は「臨時休業（終日）」を選択
4.  **期間を設定**:
    *   **開始日**: 休診開始日を選択
    *   **終了日**: 休診終了日を選択（1日だけの場合は同じ日付）
5.  **理由を入力**: 「年末年始休暇」「院内研修」など、休診理由を入力します（患者への表示にも使用されます）。
6.  **毎年繰り返し**: 毎年同じ日に休診する場合はチェックを入れます。
7.  **登録ボタン**: をクリックして保存します。

#### 時間帯休業の場合
**スクリーンショット**: `schedule_exception_partial.png`

「時間帯休業」を選択すると、追加の時間設定フィールドが表示されます：
*   **休業開始時間**: 休業が始まる時間（例: 14:00）
*   **休業終了時間**: 休業が終わる時間（例: 18:00）

これにより、「午後だけ休診」「15:00以降休診」などの柔軟な設定が可能です。

#### 登録済み例外の管理
登録したスケジュール例外は、フォーム下の「登録済みスケジュール例外」テーブルに一覧表示されます。
*   **削除**: 不要になった例外は「削除」ボタンで削除できます。
*   各例外の期間・時間帯・理由が確認できます。

> **注意**: 臨時休業を設定した日に既に予約が入っている場合は、個別に対応が必要です。設定前に該当日の予約状況を確認してください。

---
